# Критерії прийняття рішень в умовах ризику — Dash

Цей застосунок розроблений для демонстрації **класичних критеріїв прийняття рішень в умовах ризику**.  
Він дозволяє користувачу редагувати матрицю виграшів, задавати ймовірності станів природи (вручну або за допомогою принципу максимуму ентропії Гіббса–Джейнса), та аналізувати рішення за різними критеріями.

---

## Реалізовані критерії

1. **Критерій Бернуллі–Лапласа (математичного сподівання)**  
   \[
   EV(A_i) = \sum_j p_j a_{ij}, \quad вибір = \max_i EV(A_i)
   \]  
   Орієнтується на середній виграш при заданих ймовірностях.

2. **Критерій Гурвіца**  
   \[
   H_\alpha(A_i) = \alpha \cdot \max_j a_{ij} + (1-\alpha) \cdot \min_j a_{ij}
   \]  
   Компроміс між песимізмом та оптимізмом, параметр α ∈ [0;1].

3. **Критерій Ходжеса–Лемана**  
   \[
   HL(A_i) = \frac{EV(A_i) + \min_j a_{ij}}{2}
   \]  
   «Обережний» критерій, що враховує і середнє, і найгірший сценарій.

4. **Критерій мінімуму дисперсії**  
   \[
   Var(A_i) = E[X^2] - (E[X])^2, \quad вибір = \min_i Var(A_i)
   \]  
   Обирає найбільш «стабільну» стратегію з мінімальною варіативністю.

5. **Критерій EV − γ·Var (mean–variance)**  
   \[
   Score(A_i) = EV(A_i) - \gamma \cdot Var(A_i)
   \]  
   Компроміс між середнім виграшем і стабільністю. Параметр γ задає «схильність до ризику».

6. **Принцип максимуму ентропії Гіббса–Джейнса (MaxEnt)**  
   Використовується для оцінювання **ймовірностей станів природи**, коли інформація неповна, але відоме деяке обмеження (наприклад, середнє значення).  
   Розподіл шукається як:  
   \[
   p_j \propto \exp(\lambda \cdot m_j)
   \]  
   де \(m_j\) — характеристика стану (наприклад, стовпцеві середні), а λ визначається з умови виконання обмеження.

---

##  Структура коду

- **Утиліти**:
  - `normalize_probs` — нормалізація вектора ймовірностей.
  - `rows_to_df` — перетворення даних з таблиці в DataFrame.
  - `safe_float` — безпечне приведення до float.

- **Критерії**:
  - `bernoulli_laplace` — математичне сподівання.
  - `hurwicz` — Гурвіц із параметром α.
  - `hodges_lehmann` — середнє EV та мінімуму.
  - `min_variance` — мінімізація дисперсії.
  - `mean_variance` — EV−γ·Var.
  - `maxent_probs` — пошук розподілу ймовірностей за принципом максимуму ентропії.

- **Dash layout**:
  - Таблиця виграшів (`payoff-table`).
  - Таблиця ймовірностей (`prob-table`).
  - Вибір режиму: ручні ймовірності / MaxEnt.
  - Слайдери для α (Гурвіц) і γ (mean–variance).
  - Графіки:
    - Теплокарта матриці виграшів.
    - Порівняння критеріїв (стовпчики).
    - Чутливість критерію Гурвіца до α.

- **Callbacks**:
  - `modify_table` — додає стратегії/стани, скидає приклад.
  - `export_csv` — експорт даних у CSV.
  - `update_graphs` — перерахунок критеріїв, MaxEnt, оновлення графіків і результатів.

---

##  Основний приклад для аналізу

**Матриця виграшів:**
|        | S1 | S2 | S3 |
|--------|----|----|----|
| **A1** |  8 |  6 |  4 |
| **A2** |  2 | 10 |  1 |
| **A3** |  5 |  7 |  3 |

**Ймовірності станів:**
\[
p = (0.3, 0.5, 0.2)
\]

**Результати для прикладу:**
- **Бернуллі–Лаплас:**  
  EV(A1)=6.0, EV(A2)=5.1, EV(A3)=5.6 → краща стратегія **A1**.
- **Гурвіц (α=0.6):**  
  H(A1)=0.6·8+0.4·4=6.4  
  H(A2)=0.6·10+0.4·1=6.4  
  H(A3)=0.6·7+0.4·3=5.4 → оптимальні **A1 і A2**.
- **Ходжес–Леман:**  
  HL(A1)=(6.0+4)/2=5.0  
  HL(A2)=(5.1+1)/2=3.05  
  HL(A3)=(5.6+3)/2=4.3 → краща **A1**.
- **Мінімум дисперсії:**  
  Var(A1)=2.8, Var(A2)=13.69, Var(A3)=2.24 → краща **A3**.
- **EV−γ·Var (γ=0.1):**  
  Score(A1)=6.0−0.1·2.8=5.72  
  Score(A2)=5.1−0.1·13.69=3.73  
  Score(A3)=5.6−0.1·2.24=5.38 → краща **A1**.
- **MaxEnt:**  
  Якщо відоме середнє значення по стовпцевих середніх M=6, розподіл p оцінюється як максимально «невпереджений» і може відрізнятися від (0.3, 0.5, 0.2), але залишиться у допустимому діапазоні [min, max].

---

##  Як запустити

```bash
python -m venv .venv
# Windows:
.venv\Scripts\activate
# Linux/macOS:
source .venv/bin/activate
pip install -r requirements.txt
python app.py
